pipeline {
  agent any
  tools {
       maven 'Maven 3.9.9'
       jdk 'JDK 21'
  }
  stages {
      stage('Checkout') {
           steps {
                  git branch: git branch: 'develop', url: 'https://github.com/KhaoulaEsi22/Ing-log.git', credentialsId 'github-pat'
            }
      }
  stage('Build') {
     steps {
          sh 'mvn clean package'
     }
  }
  stage('Test') {
     steps {
        sh 'mvn test'
     }
  }
  }
  post {
       failure {
      mail to: 'messaskhaoula@gmail.com',
      subject: "Échec du build Jenkins",
      body: "Le build a échoué sur la branche ${env.BRANCH_NAME}. Merci de vérifier le Jenkins job."
  }
  success {
  echo "Build réussi sur la branche ${env.BRANCH_NAME}."
  }
  }
  }
